apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  annotations:
    addons_repo_basepath: addons/
    addons_repo_path: charts/application-sets
    addons_repo_revision: main
    addons_repo_url: https://github.com/jamesatintegratnio/gitops_homelab_2_0.git
    cert_manager_namespace: cert-manager
    cluster_name: test
    environment: development
    external_dns_namespace: external-dns
    managed-by: argocd.argoproj.io
    nfs_subdir_external_provisioner_namespace: nfs-provisioner
    platform.integratn.tech/base-domain: integratn.tech
    platform.integratn.tech/base-domain-sanitized: integratn-tech
    platform.integratn.tech/reconcile-at: "2026-02-10T01:30:10Z"
    workload_repo_basepath: ""
    workload_repo_path: workloads
    workload_repo_revision: main
    workload_repo_url: https://github.com/jamesatintegratnio/gitops_homelab_2_0
  labels:
    akuity.io/argo-cd-cluster-name: test
    app.kubernetes.io/component: argocd-cluster
    app.kubernetes.io/managed-by: kratix
    app.kubernetes.io/name: external-secret
    argocd.argoproj.io/secret-type: cluster
    cluster_name: test
    cluster_role: vcluster
    cluster_type: vcluster
    enable_argocd: "true"
    enable_cert_manager: "true"
    enable_external_dns: "true"
    enable_external_secrets: "true"
    enable_gateway_api_crds: "true"
    enable_nginx_gateway_fabric: "true"
    environment: development
    integratn.tech/cluster-type: vcluster
    integratn.tech/environment: development
    kratix.io/promise-name: vcluster-orchestrator-v2
    kratix.io/resource-name: test
  name: test-argocd-cluster
  namespace: argocd
spec:
  dataFrom:
  - extract:
      conversionStrategy: Default
      decodingStrategy: None
      key: vcluster-test-kubeconfig
  refreshInterval: 15m
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword-store
  target:
    name: vcluster-test
    template:
      data:
        config: '{{ index . "argocd-config" }}'
        name: '{{ index . "argocd-name" }}'
        server: '{{ index . "argocd-server" }}'
      engineVersion: v2
      metadata:
        annotations:
          addons_repo_basepath: addons/
          addons_repo_path: charts/application-sets
          addons_repo_revision: main
          addons_repo_url: https://github.com/jamesatintegratnio/gitops_homelab_2_0.git
          cert_manager_namespace: cert-manager
          cluster_name: test
          environment: development
          external_dns_namespace: external-dns
          managed-by: argocd.argoproj.io
          nfs_subdir_external_provisioner_namespace: nfs-provisioner
          platform.integratn.tech/base-domain: integratn.tech
          platform.integratn.tech/base-domain-sanitized: integratn-tech
          platform.integratn.tech/reconcile-at: "2026-02-10T01:30:10Z"
          workload_repo_basepath: ""
          workload_repo_path: workloads
          workload_repo_revision: main
          workload_repo_url: https://github.com/jamesatintegratnio/gitops_homelab_2_0
        labels:
          akuity.io/argo-cd-cluster-name: test
          argocd.argoproj.io/secret-type: cluster
          cluster_name: test
          cluster_role: vcluster
          cluster_type: vcluster
          enable_argocd: "true"
          enable_cert_manager: "true"
          enable_external_dns: "true"
          enable_external_secrets: "true"
          enable_gateway_api_crds: "true"
          enable_nginx_gateway_fabric: "true"
          environment: development
          integratn.tech/cluster-type: vcluster
          integratn.tech/environment: development
          integratn.tech/vcluster-name: test
      type: Opaque
